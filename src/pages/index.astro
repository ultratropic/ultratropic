---
// Full-screen background video homepage
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Ultratropic</title>
  </head>
  <body>
    <div class="container">
      <video
        id="video"
        autoplay
        muted
        loop
        playsinline
        preload="auto"
        class="landscape-video"
      >
      </video>
      <video
        id="video-portrait"
        autoplay
        muted
        loop
        playsinline
        preload="auto"
        class="portrait-video"
      >
      </video>
    </div>

    <script>
      const videoLandscape = document.getElementById('video');
      const videoPortrait = document.getElementById('video-portrait');
      let isPlaying = false;

      // Determine which video to use based on orientation
      const isPortrait = window.matchMedia('(orientation: portrait)').matches;
      const activeVideo = isPortrait ? videoPortrait : videoLandscape;

      // Only load the source for the active video (prevents wasted bandwidth)
      if (activeVideo) {
        const source = document.createElement('source');
        source.src = isPortrait ? '/videos/splash-portrait.mp4' : '/videos/splash.mp4';
        source.type = 'video/mp4';
        activeVideo.appendChild(source);

        const attemptPlay = () => {
          const playPromise = activeVideo.play();
          if (playPromise !== undefined) {
            playPromise.then(() => {
              isPlaying = true;
            }).catch(() => {
              isPlaying = false;
            });
          }
        };

        activeVideo.addEventListener('canplay', attemptPlay);
        attemptPlay();

        // Handle click - navigate to work page if video is playing, otherwise try to play
        document.body.addEventListener('click', () => {
          if (isPlaying) {
            window.location.href = '/work';
          } else {
            attemptPlay();
          }
        });
      }
    </script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html, body {
        width: 100vw;
        height: 100vh;
        overflow: hidden;
        background: #000;
        margin: 0;
        padding: 0;
      }

      .container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        cursor: pointer;
        background: #000;
      }

      video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
      }

      /* Show/hide videos based on orientation */
      .landscape-video {
        display: block;
      }

      .portrait-video {
        display: none;
      }

      @media (orientation: portrait) {
        .landscape-video {
          display: none;
        }

        .portrait-video {
          display: block;
        }
      }
    </style>
  </body>
</html>
